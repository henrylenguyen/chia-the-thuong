<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Practice Cards</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <h1 class="text-2xl font-bold mb-6">Test Practice Cards</h1>
    <div id="practice-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>

    <script type="module">
        import { DataLoader } from './assets/js/modules/data-loader.js';
        import { PracticeRenderer } from './assets/js/components/practice-renderer.js';

        async function testPracticeCards() {
            try {
                console.log('Loading data...');
                
                const dataLoader = new DataLoader();
                const practiceRenderer = new PracticeRenderer();
                
                // Load data
                const success = await practiceRenderer.loadData();
                if (!success) {
                    console.error('Failed to load data');
                    return;
                }
                
                console.log('Data loaded successfully');
                console.log('Theory data:', practiceRenderer.theoryData);
                console.log('Questions data:', practiceRenderer.questionsData);
                console.log('Exercise definitions:', practiceRenderer.exerciseDefinitions);
                
                // Test rendering
                const container = document.getElementById('practice-container');
                if (practiceRenderer.exerciseDefinitions) {
                    const categories = {};
                    Object.entries(practiceRenderer.exerciseDefinitions).forEach(([key, exercise]) => {
                        const category = exercise.category || 'other';
                        if (!categories[category]) {
                            categories[category] = [];
                        }
                        categories[category].push({ key, ...exercise });
                    });
                    
                    Object.entries(categories).forEach(([categoryName, exercises]) => {
                        exercises.slice(0, 3).forEach(exercise => {
                            const cardHTML = practiceRenderer.createPracticeCard(exercise);
                            const cardElement = document.createElement('div');
                            cardElement.innerHTML = cardHTML;
                            container.appendChild(cardElement.firstElementChild);
                        });
                    });
                }
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('practice-container').innerHTML = 
                    `<div class="text-red-500">Error: ${error.message}</div>`;
            }
        }

        // Start test
        testPracticeCards();
    </script>
</body>
</html>
