<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Học Tiếng Nhật - Thể Thường (普通形)</title>
  <!-- Tailwind CSS CDN - For development only -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'sans': ['Inter', 'sans-serif'],
            'japanese': ['Noto Sans JP', 'sans-serif'],
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-up': 'slideUp 0.6s ease-out',
            'bounce-in': 'bounceIn 0.5s ease-out',
            'shimmer': 'shimmer 2s infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
            bounceIn: {
              '0%': { transform: 'scale(0.3)', opacity: '0' },
              '50%': { transform: 'scale(1.05)' },
              '70%': { transform: 'scale(0.9)' },
              '100%': { transform: 'scale(1)', opacity: '1' },
            },
            shimmer: {
              '0%': { left: '-100%' },
              '100%': { left: '100%' },
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>

  <style>
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .glass-effect {
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .shimmer::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      animation: shimmer 2s infinite;
    }

    /* Quiz active state */
    .quiz-active {
      animation: fadeIn 0.3s ease-in-out;
    }

    /* Page transitions */
    .page-enter {
      animation: slideUp 0.6s ease-out;
    }

    /* Ensure quiz container is above everything */
    #quiz-container {
      z-index: 9999;
    }

    /* Input states */
    .answer-input.correct {
      border-color: #10b981 !important;
      background-color: #f0fdf4 !important;
    }

    .dark .answer-input.correct {
      border-color: #10b981 !important;
      background-color: #064e3b !important;
    }

    .answer-input.incorrect {
      border-color: #ef4444 !important;
      background-color: #fef2f2 !important;
    }

    .dark .answer-input.incorrect {
      border-color: #ef4444 !important;
      background-color: #7f1d1d !important;
    }
  </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
  <!-- Loading Screen -->
  <div id="loading-screen"
    class="fixed inset-0 bg-white dark:bg-gray-900 flex flex-col items-center justify-center z-50">
    <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mb-4"></div>
    <div class="text-xl font-medium text-gray-700 dark:text-gray-300 mb-2">Đang tải dữ liệu...</div>
    <div class="w-64 bg-gray-200 dark:bg-gray-700 rounded-full h-2">
      <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full animate-pulse"
        style="width: 100%; animation-duration: 2s;"></div>
    </div>
  </div>

  <!-- Header -->
  <header
    class="sticky top-0 z-40 glass-effect bg-white/80 dark:bg-gray-900/80 border-b border-gray-200 dark:border-gray-700">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <!-- Logo -->
        <div class="flex items-center space-x-3">
          <i class="fas fa-torii-gate text-2xl gradient-text"></i>
          <h1 class="text-xl font-bold gradient-text font-japanese">日本語学習</h1>
        </div>

        <!-- Navigation -->
        <nav class="hidden md:flex space-x-2">
          <button class="nav-btn px-4 py-2 rounded-lg font-medium transition-all duration-300 bg-blue-500 text-white"
            data-page="theory">
            <i class="fas fa-book mr-2"></i>Lý Thuyết
          </button>
          <button
            class="nav-btn px-4 py-2 rounded-lg font-medium transition-all duration-300 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"
            data-page="practice">
            <i class="fas fa-pencil-alt mr-2"></i>Thực Hành
          </button>
          <button
            class="nav-btn px-4 py-2 rounded-lg font-medium transition-all duration-300 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"
            data-page="review">
            <i class="fas fa-redo mr-2"></i>Ôn Tập
          </button>
          <button
            class="nav-btn px-4 py-2 rounded-lg font-medium transition-all duration-300 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"
            data-page="statistics">
            <i class="fas fa-chart-bar mr-2"></i>Thống Kê
          </button>
        </nav>

        <!-- Theme Toggle -->
        <button id="theme-toggle"
          class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
          <i class="fas fa-moon dark:hidden"></i>
          <i class="fas fa-sun hidden dark:block"></i>
        </button>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg text-gray-600 dark:text-gray-300">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu"
      class="hidden md:hidden border-t border-gray-200 dark:border-gray-700 bg-white/90 dark:bg-gray-900/90">
      <div class="px-4 py-2 space-y-1">
        <button class="mobile-nav-btn w-full text-left px-3 py-2 rounded-lg font-medium bg-blue-500 text-white"
          data-page="theory">
          <i class="fas fa-book mr-2"></i>Lý Thuyết
        </button>
        <button
          class="mobile-nav-btn w-full text-left px-3 py-2 rounded-lg font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"
          data-page="practice">
          <i class="fas fa-pencil-alt mr-2"></i>Thực Hành
        </button>
        <button
          class="mobile-nav-btn w-full text-left px-3 py-2 rounded-lg font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"
          data-page="review">
          <i class="fas fa-redo mr-2"></i>Ôn Tập
        </button>
        <button
          class="mobile-nav-btn w-full text-left px-3 py-2 rounded-lg font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"
          data-page="statistics">
          <i class="fas fa-chart-bar mr-2"></i>Thống Kê
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Theory Page -->
    <div id="theory-page" class="page animate-slide-up">
      <!-- Hero Section -->
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-6xl font-bold gradient-text mb-4 font-japanese">
          普通形 (Thể Thường)
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
          Nắm vững kiến thức cơ bản về thể thường trong tiếng Nhật một cách dễ dàng và trực quan
        </p>
      </div>

      <!-- Dynamic Theory Content -->
      <div class="grid gap-8">
        <!-- Content will be populated by JavaScript -->
      </div>


    </div>

    <!-- Practice Page -->
    <div id="practice-page" class="page hidden">
      <!-- Hero Section -->
      <div class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold gradient-text mb-4">Thực Hành Bài Tập</h1>
        <p class="text-xl text-gray-600 dark:text-gray-400">Luyện tập và kiểm tra kiến thức thể thường</p>
      </div>

      <!-- Stats Dashboard -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        <div
          class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg text-center border border-gray-200 dark:border-gray-700">
          <i class="fas fa-check-circle text-3xl text-green-500 mb-2"></i>
          <div class="text-2xl font-bold text-gray-800 dark:text-gray-200" id="correct-count">0</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Câu Đúng</div>
        </div>
        <div
          class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg text-center border border-gray-200 dark:border-gray-700">
          <i class="fas fa-clipboard-list text-3xl text-blue-500 mb-2"></i>
          <div class="text-2xl font-bold text-gray-800 dark:text-gray-200" id="total-count">0</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Tổng Câu</div>
        </div>
        <div
          class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg text-center border border-gray-200 dark:border-gray-700">
          <i class="fas fa-fire text-3xl text-orange-500 mb-2"></i>
          <div class="text-2xl font-bold text-gray-800 dark:text-gray-200" id="streak-count">0</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Streak</div>
        </div>
        <div
          class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg text-center border border-gray-200 dark:border-gray-700">
          <i class="fas fa-percentage text-3xl text-purple-500 mb-2"></i>
          <div class="text-2xl font-bold text-gray-800 dark:text-gray-200" id="accuracy-rate">0%</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Độ Chính Xác</div>
        </div>
      </div>

      <!-- Exercise Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="exercise-grid">
        <!-- Exercise cards will be populated by JavaScript -->
      </div>
    </div>

    <!-- Review Page -->
    <div id="review-page" class="page hidden">
      <div class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold gradient-text mb-4">Ôn Tập Câu Sai</h1>
        <p class="text-xl text-gray-600 dark:text-gray-400">Ôn lại những câu bạn đã làm sai để học tập hiệu quả hơn</p>
      </div>

      <div id="review-content" class="space-y-6">
        <!-- Review content will be populated by JavaScript -->
      </div>
    </div>

    <!-- Statistics Page -->
    <div id="statistics-page" class="page hidden">
      <div class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold gradient-text mb-4">Thống Kê Học Tập</h1>
        <p class="text-xl text-gray-600 dark:text-gray-400">Theo dõi tiến độ học tập của bạn</p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Progress Chart -->
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700">
          <h3 class="text-xl font-bold mb-4">Tiến Độ Theo Thời Gian</h3>
          <div id="progress-chart" class="h-64 flex items-center justify-center text-gray-500">
            Biểu đồ tiến độ sẽ được hiển thị ở đây
          </div>
        </div>

        <!-- Exercise Progress -->
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700">
          <h3 class="text-xl font-bold mb-4">Tiến Độ Bài Tập</h3>
          <div id="exercise-progress" class="space-y-4">
            <!-- Exercise progress will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- Quiz Container (Full Page Style) -->
    <div id="quiz-container" class="hidden fixed inset-0 bg-gray-50 dark:bg-gray-900 z-50 overflow-hidden">
      <div class="h-screen flex flex-col">
        <!-- Quiz Header -->
        <div class="bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700 p-6">
          <div class="max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-2xl font-bold text-blue-600 dark:text-blue-400" id="quiz-title">Động Từ - Quá Khứ</h2>
              <div class="text-sm text-gray-600 dark:text-gray-400" id="quiz-progress-text">1/25</div>
            </div>

            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
              <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300"
                   id="quiz-progress-bar" style="width: 4%"></div>
            </div>
          </div>
        </div>

        <!-- Question Card -->
        <div class="flex-1 flex items-center justify-center p-6">
          <div class="w-full max-w-4xl">
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-8">
              <!-- Question Content with Left Border -->
              <div class="border-l-4 border-blue-500 pl-6">
                <div class="text-lg mb-4 text-gray-700 dark:text-gray-300" id="question-text">Chuyển câu sau sang thể thường:</div>

                <div class="text-3xl font-bold mb-2 text-blue-700 dark:text-blue-300 font-japanese" id="japanese-sentence">
                  きのう えいがを みました。
                </div>

                <div class="text-gray-600 dark:text-gray-400 italic mb-6" id="vietnamese-meaning">(hôm qua đã xem phim)</div>

                <div class="text-lg mb-6">
                  → <span id="sentence-prefix" class="font-japanese">きのう えいがを</span>
                  <span class="border-b-2 border-dashed border-blue-500 px-4 py-1 mx-2 min-w-[120px] inline-block text-center bg-gray-50 dark:bg-gray-700 rounded">_____</span>。
                </div>

                <!-- Answer Input -->
                <input type="text" id="answer-input"
                  class="w-full px-4 py-3 border-2 border-blue-300 dark:border-blue-600 rounded-xl font-japanese text-lg bg-gray-50 dark:bg-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800 transition-all duration-300"
                  placeholder="Nhập đáp án..." autocomplete="off">
              </div>

              <!-- Feedback -->
              <div id="feedback" class="mt-6"></div>

              <!-- Action Buttons -->
              <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                <!-- Main Action Buttons -->
                <div class="flex gap-3 justify-center mb-4">
                  <button id="check-btn"
                    class="px-8 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
                    <i class="fas fa-check mr-2"></i>Kiểm Tra
                  </button>
                  <button id="next-btn"
                    class="hidden px-8 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
                    <i class="fas fa-arrow-right mr-2"></i>Tiếp Theo
                  </button>
                </div>

                <!-- Navigation Button -->
                <div class="flex justify-start">
                  <button id="back-to-selection"
                    class="px-6 py-2 text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 border border-blue-500 dark:border-blue-400 hover:border-blue-600 dark:hover:border-blue-300 rounded-xl font-medium transition-all duration-300 hover:bg-blue-50 dark:hover:bg-blue-900/20">
                    <i class="fas fa-arrow-left mr-2"></i>Quay Lại
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Results Modal -->
    <div id="results-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md text-center p-8">
        <div class="text-6xl mb-4">🎉</div>
        <h2 class="text-3xl font-bold mb-4 gradient-text">Hoàn Thành!</h2>
        <div class="text-4xl font-bold mb-2" id="final-score">0/0</div>
        <div class="text-gray-600 dark:text-gray-400 mb-6" id="final-message">Chúc mừng bạn!</div>

        <div class="grid grid-cols-3 gap-4 mb-6">
          <div>
            <div class="text-2xl font-bold text-green-500" id="final-correct">0</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">Đúng</div>
          </div>
          <div>
            <div class="text-2xl font-bold text-red-500" id="final-wrong">0</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">Sai</div>
          </div>
          <div>
            <div class="text-2xl font-bold text-orange-500" id="final-skipped">0</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">Bỏ qua</div>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-3">
          <button id="retry-exercise"
            class="flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors">
            <i class="fas fa-redo mr-2"></i>Làm Lại
          </button>
          <button id="close-results"
            class="flex-1 px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors">
            <i class="fas fa-home mr-2"></i>Trang Chủ
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- Import main app module -->
  <script type="module" src="./assets/js/app-main.js"></script>
</body>

</html>
